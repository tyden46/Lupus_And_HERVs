#!/bin/bash
#SBATCH --time=24:00:00   # walltime
#SBATCH -J "telescope"       # job name
#SBATCH --array=0-287           # job array of size 31
#SBATCH -p defq
#SBATCH --mail-type=ALL
#SBATCH --mail-user=tyden46@gwu.edu
SAVEIFS=$IFS   # Save current IFS
IFS=$'\n'      # Change IFS to new line
# Make an array that contains the names of all of your samples
list=('SRR11582313'
'SRR11582314'
'SRR11582315'
'SRR11582316'
'SRR11582317'
'SRR11582318'
'SRR11582319'
'SRR11582320'
'SRR11582321'
'SRR11582322'
'SRR11582323'
'SRR11582324'
'SRR11582325'
'SRR11582326'
'SRR11582327'
'SRR11582328'
'SRR11582329'
'SRR11582330'
'SRR11582331'
'SRR11582332'
'SRR11582333'
'SRR11582334'
'SRR11582335'
'SRR11582336'
'SRR11582337'
'SRR11582338'
'SRR11582339'
'SRR11582340'
'SRR11582341'
'SRR11582342'
'SRR11582343'
'SRR11582344'
'SRR11582345'
'SRR11582346'
'SRR11582347'
'SRR11582348'
'SRR11582349'
'SRR11582350'
'SRR11582351'
'SRR11582352'
'SRR11582353'
'SRR11582354'
'SRR11582355'
'SRR11582356'
'SRR11582357'
'SRR11582358'
'SRR11582359'
'SRR11582360'
'SRR11582361'
'SRR11582362'
'SRR11582363'
'SRR11582364'
'SRR11582365'
'SRR11582366'
'SRR11582367'
'SRR11582368'
'SRR11582369'
'SRR11582370'
'SRR11582371'
'SRR11582372'
'SRR11582373'
'SRR11582374'
'SRR11582375'
'SRR11582376'
'SRR11582377'
'SRR11582378'
'SRR11582379'
'SRR11582380'
'SRR11582381'
'SRR11582382'
'SRR11582383'
'SRR11582384'
'SRR11582385'
'SRR11582386'
'SRR11582387'
'SRR11582388'
'SRR11582389'
'SRR11582390'
'SRR11582391'
'SRR11582392'
'SRR11582393'
'SRR11582394'
'SRR11582395'
'SRR11582396'
'SRR11582397'
'SRR11582398'
'SRR11582399'
'SRR11582400'
'SRR11582401'
'SRR11582402'
'SRR11582403'
'SRR11582404'
'SRR11582405'
'SRR11582406'
'SRR11582407'
'SRR11582408'
'SRR11582409'
'SRR11582410'
'SRR11582411'
'SRR11582412'
'SRR11582413'
'SRR11582414'
'SRR11582415'
'SRR11582416'
'SRR11582417'
'SRR11582418'
'SRR11582419'
'SRR11582420'
'SRR11582421'
'SRR11582422'
'SRR11582423'
'SRR11582424'
'SRR11582425'
'SRR11582426'
'SRR11582427'
'SRR11582428'
'SRR11582429'
'SRR11582430'
'SRR11582431'
'SRR11582432'
'SRR11582433'
'SRR11582434'
'SRR11582435'
'SRR11582436'
'SRR11582437'
'SRR11582438'
'SRR11582439'
'SRR11582440'
'SRR11582441'
'SRR11582442'
'SRR11582443'
'SRR11582444'
'SRR11582445'
'SRR11582446'
'SRR11582447'
'SRR11582448'
'SRR11582449'
'SRR11582450'
'SRR11582451'
'SRR11582452'
'SRR11582453'
'SRR11582454'
'SRR11582455'
'SRR11582456'
'SRR11582457'
'SRR11582458'
'SRR11582459'
'SRR11582460'
'SRR11582461'
'SRR11582462'
'SRR11582463'
'SRR11582464'
'SRR11582465'
'SRR11582466'
'SRR11582467'
'SRR11582468'
'SRR11582469'
'SRR11582470'
'SRR11582471'
'SRR11582472'
'SRR11582473'
'SRR11582474'
'SRR11582475'
'SRR11582476'
'SRR11582477'
'SRR11582478'
'SRR11582479'
'SRR11582480'
'SRR11582481'
'SRR11582482'
'SRR11582483'
'SRR11582484'
'SRR11582485'
'SRR11582486'
'SRR11582487'
'SRR11582488'
'SRR11582489'
'SRR11582490'
'SRR11582491'
'SRR11582492'
'SRR11582493'
'SRR11582494'
'SRR11582495'
'SRR11582496'
'SRR11582497'
'SRR11582498'
'SRR11582499'
'SRR11582500'
'SRR11582501'
'SRR11582502'
'SRR11582503'
'SRR11582504'
'SRR11582505'
'SRR11582506'
'SRR11582507'
'SRR11582508'
'SRR11582509'
'SRR11582510'
'SRR11582511'
'SRR11582512'
'SRR11582513'
'SRR11582514'
'SRR11582515'
'SRR11582516'
'SRR11582517'
'SRR11582518'
'SRR11582519'
'SRR11582520'
'SRR11582521'
'SRR11582522'
'SRR11582523'
'SRR11582524'
'SRR11582525'
'SRR11582526'
'SRR11582527'
'SRR11582528'
'SRR11582529'
'SRR11582530'
'SRR11582531'
'SRR11582532'
'SRR11582533'
'SRR11582534'
'SRR11582535'
'SRR11582536'
'SRR11582537'
'SRR11582538'
'SRR11582539'
'SRR11582540'
'SRR11582541'
'SRR11582542'
'SRR11582543'
'SRR11582544'
'SRR11582545'
'SRR11582546'
'SRR11582547'
'SRR11582548'
'SRR11582549'
'SRR11582550'
'SRR11582551'
'SRR11582552'
'SRR11582553'
'SRR11582554'
'SRR11582555'
'SRR11582556'
'SRR11582557'
'SRR11582558'
'SRR11582559'
'SRR11582560'
'SRR11582561'
'SRR11582562'
'SRR11582563'
'SRR11582564'
'SRR11582565'
'SRR11582566'
'SRR11582567'
'SRR11582568'
'SRR11582569'
'SRR11582570'
'SRR11582571'
'SRR11582572'
'SRR11582573'
'SRR11582574'
'SRR11582575'
'SRR11582576'
'SRR11582577'
'SRR11582578'
'SRR11582579'
'SRR11582580'
'SRR11582581'
'SRR11582582'
'SRR11582583'
'SRR11582584'
'SRR11582585'
'SRR11582586'
'SRR11582587'
'SRR11582588'
'SRR11582589'
'SRR11582590'
'SRR11582591'
'SRR11582592'
'SRR11582593'
'SRR11582594'
'SRR11582595'
'SRR11582596'
'SRR11582597'
'SRR11582598'
'SRR11582599'
'SRR11582600')
filename=${list[${SLURM_ARRAY_TASK_ID}]}
bowtie2 -p 40 -k 100 --very-sensitive-local --score-min "L,0,1.6" --rg-id $filename -x refs/hg38 -U "$filename".fastq -S sam-"$filename".sam 2>&1 | tee multi.log
mkdir telescope-"$filename"-directory
telescope assign --theta_prior 200000 --max_iter 200 --updated_sam --outdir telescope-"$filename"-directory sam-"$filename".sam refs/HERV_rmsk.hg38.v2.2.gtf 2>&1 | tee telescope.log
IFS=$SAVEIFS   # Restore IFS
